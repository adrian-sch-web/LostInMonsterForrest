<div class="board">
    @for(column of board ;let row = $index; track row;){
        <div class="column">
            @for(cell of board[row]; let col = $index; track col;){
                <div class="cell" [style.background-image]="'url(' + getFloorUrl(row,col) + ')'" [style.width]="cellSize" [style.height]="cellSize">
                    <img [src]="getImageUrl(cell)" [style.width]="cellSize" [style.height]="cellSize">
                </div>
            }
        </div>
    }
</div>
<div class="right-panel">
    <div class="legend">
        <h3 class="legend-header">Legend:</h3>
        @for(entry of legend; track $index){
            <div class="legend-entry">
                <img [src]="entry.url" [style.width]="cellSize" [style.height]="cellSize">
                <div>{{entry.name}}</div>
            </div>
        }
    </div>

    <div class="keyboard">
        <button class="key" style="grid-column: 2; grid-row: 1;" (click)="move(2)"
            [style.background-color]="keyboardDirection==1?'grey':'darkgrey'"
            (mouseenter)="keyboardDirection=1"
            (mouseleave)="keyboardDirection=0">
            <svg  viewBox="0 0 32 32">
                <path d="m26.71 10.29-10-10a1 1 0 0 0-1.41 0l-10 10 1.41 1.41L15 3.41V32h2V3.41l8.29 8.29z"/>
            </svg>
        </button>
        <button class="key" style="grid-column: 1; grid-row: 2;"(click)="move(0)"
            [style.background-color]="keyboardDirection==2?'grey':'darkgrey'" 
            (mouseenter)="keyboardDirection=2"
            (mouseleave)="keyboardDirection=0">
            <svg viewBox="0 0 32 32">
                <path d="M32 15H3.41l8.29-8.29-1.41-1.42-10 10a1 1 0 0 0 0 1.41l10 10 1.41-1.41L3.41 17H32z"/>
            </svg>
        </button>
        <button class="key" style="grid-column: 2; grid-row: 2;" (click)="move(3)"
            [style.background-color]="keyboardDirection==3?'grey':'darkgrey'" 
            (mouseenter)="keyboardDirection=3"
            (mouseleave)="keyboardDirection=0">
            <svg viewBox="0 0 32 32">
            <path d="M26.29 20.29 18 28.59V0h-2v28.59l-8.29-8.3-1.42 1.42 10 10a1 1 0 0 0 1.41 0l10-10z"/>
        </svg>
        </button>
        <button class="key" style="grid-column: 3; grid-row: 2;" (click)="move(1)"
            [style.background-color]="keyboardDirection==4?'grey':'darkgrey'" 
            (mouseenter)="keyboardDirection=4" (mouseleave)="keyboardDirection=0">
            <svg viewBox="0 0 32 32">
            <path d="m31.71 15.29-10-10-1.42 1.42 8.3 8.29H0v2h28.59l-8.29 8.29 1.41 1.41 10-10a1 1 0 0 0 0-1.41z"/>
        </svg>
        </button>
    </div>
</div>
